2024-12-22 12:38:24 - app.cli - DEBUG - CLI logging initialized (quiet=False)
2024-12-22 12:38:24 - app.cli - DEBUG - Environment: development
2024-12-22 12:38:24 - app.cli - DEBUG - Log Level: DEBUG
2024-12-22 12:38:24 - app.cli - DEBUG - CLI started with quiet=False, log_level=DEBUG
2024-12-22 12:38:24 - app.cli - INFO - Starting interactive mode
2024-12-22 12:38:24 - app.cli - DEBUG - CLI logging initialized (quiet=True)
2024-12-22 12:38:24 - app.cli - DEBUG - Environment: development
2024-12-22 12:38:24 - app.cli - DEBUG - Log Level: DEBUG
2024-12-22 12:39:43 - app.cli.commands.api_key - ERROR - Failed to list API keys
Traceback (most recent call last):
  File "/opt/venv/lib/python3.13/site-packages/sqlalchemy/sql/sqltypes.py", line 1583, in _db_value_for_elem
    return self._valid_lookup[elem]
           ~~~~~~~~~~~~~~~~~~^^^^^^
KeyError: <typer.models.OptionInfo object at 0x7bee48425bd0>

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/opt/venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1815, in _execute_context
    context = constructor(
        dialect, self, conn, execution_options, *args, **kw
    )
  File "/opt/venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 1476, in _init_compiled
    flattened_processors[key](compiled_params[key])
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/venv/lib/python3.13/site-packages/sqlalchemy/sql/sqltypes.py", line 1731, in process
    value = self._db_value_for_elem(value)
  File "/opt/venv/lib/python3.13/site-packages/sqlalchemy/sql/sqltypes.py", line 1596, in _db_value_for_elem
    raise LookupError(
    ...<7 lines>...
    ) from err
LookupError: '<typer.models.OptionInfo object at 0x7bee48425bd0>' is not among the defined enum values. Enum name: role. Possible values: ADMIN, USER

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/app/cli/commands/api_key.py", line 68, in list
    api_keys = db.exec(query).all()
               ~~~~~~~^^^^^^^
  File "/opt/venv/lib/python3.13/site-packages/sqlmodel/orm/session.py", line 66, in exec
    results = super().execute(
        statement,
    ...<4 lines>...
        _add_event=_add_event,
    )
  File "/opt/venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2362, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/opt/venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2247, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "/opt/venv/lib/python3.13/site-packages/sqlalchemy/orm/context.py", line 305, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "/opt/venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "/opt/venv/lib/python3.13/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/opt/venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "/opt/venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1821, in _execute_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str(statement), parameters, None, None
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/opt/venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/opt/venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1815, in _execute_context
    context = constructor(
        dialect, self, conn, execution_options, *args, **kw
    )
  File "/opt/venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 1476, in _init_compiled
    flattened_processors[key](compiled_params[key])
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/venv/lib/python3.13/site-packages/sqlalchemy/sql/sqltypes.py", line 1731, in process
    value = self._db_value_for_elem(value)
  File "/opt/venv/lib/python3.13/site-packages/sqlalchemy/sql/sqltypes.py", line 1596, in _db_value_for_elem
    raise LookupError(
    ...<7 lines>...
    ) from err
sqlalchemy.exc.StatementError: (builtins.LookupError) '<typer.models.OptionInfo object at 0x7bee48425bd0>' is not among the defined enum values. Enum name: role. Possible values: ADMIN, USER
[SQL: SELECT api_keys.id, api_keys."key", api_keys.name, api_keys.role, api_keys.created_at, api_keys.last_used, api_keys.is_active, api_keys.user_id 
FROM api_keys 
WHERE api_keys.is_active = 1 AND api_keys.role = ?]
[parameters: [{}]]
2024-12-22 12:39:43 - app.cli.interactive - ERROR - Failed to list API keys
Traceback (most recent call last):
  File "/opt/venv/lib/python3.13/site-packages/sqlalchemy/sql/sqltypes.py", line 1583, in _db_value_for_elem
    return self._valid_lookup[elem]
           ~~~~~~~~~~~~~~~~~~^^^^^^
KeyError: <typer.models.OptionInfo object at 0x7bee48425bd0>

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/opt/venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1815, in _execute_context
    context = constructor(
        dialect, self, conn, execution_options, *args, **kw
    )
  File "/opt/venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 1476, in _init_compiled
    flattened_processors[key](compiled_params[key])
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/venv/lib/python3.13/site-packages/sqlalchemy/sql/sqltypes.py", line 1731, in process
    value = self._db_value_for_elem(value)
  File "/opt/venv/lib/python3.13/site-packages/sqlalchemy/sql/sqltypes.py", line 1596, in _db_value_for_elem
    raise LookupError(
    ...<7 lines>...
    ) from err
LookupError: '<typer.models.OptionInfo object at 0x7bee48425bd0>' is not among the defined enum values. Enum name: role. Possible values: ADMIN, USER

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/app/cli/commands/api_key.py", line 68, in list
    api_keys = db.exec(query).all()
               ~~~~~~~^^^^^^^
  File "/opt/venv/lib/python3.13/site-packages/sqlmodel/orm/session.py", line 66, in exec
    results = super().execute(
        statement,
    ...<4 lines>...
        _add_event=_add_event,
    )
  File "/opt/venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2362, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/opt/venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2247, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "/opt/venv/lib/python3.13/site-packages/sqlalchemy/orm/context.py", line 305, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "/opt/venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "/opt/venv/lib/python3.13/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/opt/venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "/opt/venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1821, in _execute_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str(statement), parameters, None, None
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/opt/venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/opt/venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1815, in _execute_context
    context = constructor(
        dialect, self, conn, execution_options, *args, **kw
    )
  File "/opt/venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 1476, in _init_compiled
    flattened_processors[key](compiled_params[key])
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/venv/lib/python3.13/site-packages/sqlalchemy/sql/sqltypes.py", line 1731, in process
    value = self._db_value_for_elem(value)
  File "/opt/venv/lib/python3.13/site-packages/sqlalchemy/sql/sqltypes.py", line 1596, in _db_value_for_elem
    raise LookupError(
    ...<7 lines>...
    ) from err
sqlalchemy.exc.StatementError: (builtins.LookupError) '<typer.models.OptionInfo object at 0x7bee48425bd0>' is not among the defined enum values. Enum name: role. Possible values: ADMIN, USER
[SQL: SELECT api_keys.id, api_keys."key", api_keys.name, api_keys.role, api_keys.created_at, api_keys.last_used, api_keys.is_active, api_keys.user_id 
FROM api_keys 
WHERE api_keys.is_active = 1 AND api_keys.role = ?]
[parameters: [{}]]

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/cli/interactive.py", line 193, in list_keys_menu
    api_key_commands.list(
    ~~~~~~~~~~~~~~~~~~~~~^
        show_inactive=show_inactive,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        format=format_output
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/app/app/cli/commands/api_key.py", line 117, in list
    raise typer.Exit(1)
click.exceptions.Exit: 1
2024-12-22 12:39:56 - app.cli - DEBUG - CLI logging initialized (quiet=False)
2024-12-22 12:39:56 - app.cli - DEBUG - Environment: development
2024-12-22 12:39:56 - app.cli - DEBUG - Log Level: DEBUG
2024-12-22 12:39:56 - app.cli - DEBUG - CLI started with quiet=False, log_level=DEBUG
2024-12-22 12:39:56 - app.cli - INFO - Starting interactive mode
2024-12-22 12:39:56 - app.cli - DEBUG - CLI logging initialized (quiet=True)
2024-12-22 12:39:56 - app.cli - DEBUG - Environment: development
2024-12-22 12:39:56 - app.cli - DEBUG - Log Level: DEBUG
2024-12-22 12:40:02 - app.cli.commands.api_key - ERROR - Failed to list API keys
Traceback (most recent call last):
  File "/opt/venv/lib/python3.13/site-packages/sqlalchemy/sql/sqltypes.py", line 1583, in _db_value_for_elem
    return self._valid_lookup[elem]
           ~~~~~~~~~~~~~~~~~~^^^^^^
KeyError: <typer.models.OptionInfo object at 0x7a3ebc055950>

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/opt/venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1815, in _execute_context
    context = constructor(
        dialect, self, conn, execution_options, *args, **kw
    )
  File "/opt/venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 1476, in _init_compiled
    flattened_processors[key](compiled_params[key])
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/venv/lib/python3.13/site-packages/sqlalchemy/sql/sqltypes.py", line 1731, in process
    value = self._db_value_for_elem(value)
  File "/opt/venv/lib/python3.13/site-packages/sqlalchemy/sql/sqltypes.py", line 1596, in _db_value_for_elem
    raise LookupError(
    ...<7 lines>...
    ) from err
LookupError: '<typer.models.OptionInfo object at 0x7a3ebc055950>' is not among the defined enum values. Enum name: role. Possible values: ADMIN, USER

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/app/cli/commands/api_key.py", line 68, in list
    api_keys = db.exec(query).all()
               ~~~~~~~^^^^^^^
  File "/opt/venv/lib/python3.13/site-packages/sqlmodel/orm/session.py", line 66, in exec
    results = super().execute(
        statement,
    ...<4 lines>...
        _add_event=_add_event,
    )
  File "/opt/venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2362, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/opt/venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2247, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "/opt/venv/lib/python3.13/site-packages/sqlalchemy/orm/context.py", line 305, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "/opt/venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "/opt/venv/lib/python3.13/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/opt/venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "/opt/venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1821, in _execute_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str(statement), parameters, None, None
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/opt/venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/opt/venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1815, in _execute_context
    context = constructor(
        dialect, self, conn, execution_options, *args, **kw
    )
  File "/opt/venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 1476, in _init_compiled
    flattened_processors[key](compiled_params[key])
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/venv/lib/python3.13/site-packages/sqlalchemy/sql/sqltypes.py", line 1731, in process
    value = self._db_value_for_elem(value)
  File "/opt/venv/lib/python3.13/site-packages/sqlalchemy/sql/sqltypes.py", line 1596, in _db_value_for_elem
    raise LookupError(
    ...<7 lines>...
    ) from err
sqlalchemy.exc.StatementError: (builtins.LookupError) '<typer.models.OptionInfo object at 0x7a3ebc055950>' is not among the defined enum values. Enum name: role. Possible values: ADMIN, USER
[SQL: SELECT api_keys.id, api_keys."key", api_keys.name, api_keys.role, api_keys.created_at, api_keys.last_used, api_keys.is_active, api_keys.user_id 
FROM api_keys 
WHERE api_keys.role = ?]
[parameters: [{}]]
2024-12-22 12:40:02 - app.cli.interactive - ERROR - Failed to list API keys
Traceback (most recent call last):
  File "/opt/venv/lib/python3.13/site-packages/sqlalchemy/sql/sqltypes.py", line 1583, in _db_value_for_elem
    return self._valid_lookup[elem]
           ~~~~~~~~~~~~~~~~~~^^^^^^
KeyError: <typer.models.OptionInfo object at 0x7a3ebc055950>

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/opt/venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1815, in _execute_context
    context = constructor(
        dialect, self, conn, execution_options, *args, **kw
    )
  File "/opt/venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 1476, in _init_compiled
    flattened_processors[key](compiled_params[key])
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/venv/lib/python3.13/site-packages/sqlalchemy/sql/sqltypes.py", line 1731, in process
    value = self._db_value_for_elem(value)
  File "/opt/venv/lib/python3.13/site-packages/sqlalchemy/sql/sqltypes.py", line 1596, in _db_value_for_elem
    raise LookupError(
    ...<7 lines>...
    ) from err
LookupError: '<typer.models.OptionInfo object at 0x7a3ebc055950>' is not among the defined enum values. Enum name: role. Possible values: ADMIN, USER

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/app/cli/commands/api_key.py", line 68, in list
    api_keys = db.exec(query).all()
               ~~~~~~~^^^^^^^
  File "/opt/venv/lib/python3.13/site-packages/sqlmodel/orm/session.py", line 66, in exec
    results = super().execute(
        statement,
    ...<4 lines>...
        _add_event=_add_event,
    )
  File "/opt/venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2362, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/opt/venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2247, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "/opt/venv/lib/python3.13/site-packages/sqlalchemy/orm/context.py", line 305, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "/opt/venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "/opt/venv/lib/python3.13/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/opt/venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "/opt/venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1821, in _execute_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str(statement), parameters, None, None
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/opt/venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/opt/venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1815, in _execute_context
    context = constructor(
        dialect, self, conn, execution_options, *args, **kw
    )
  File "/opt/venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 1476, in _init_compiled
    flattened_processors[key](compiled_params[key])
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/venv/lib/python3.13/site-packages/sqlalchemy/sql/sqltypes.py", line 1731, in process
    value = self._db_value_for_elem(value)
  File "/opt/venv/lib/python3.13/site-packages/sqlalchemy/sql/sqltypes.py", line 1596, in _db_value_for_elem
    raise LookupError(
    ...<7 lines>...
    ) from err
sqlalchemy.exc.StatementError: (builtins.LookupError) '<typer.models.OptionInfo object at 0x7a3ebc055950>' is not among the defined enum values. Enum name: role. Possible values: ADMIN, USER
[SQL: SELECT api_keys.id, api_keys."key", api_keys.name, api_keys.role, api_keys.created_at, api_keys.last_used, api_keys.is_active, api_keys.user_id 
FROM api_keys 
WHERE api_keys.role = ?]
[parameters: [{}]]

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/cli/interactive.py", line 193, in list_keys_menu
    api_key_commands.list(
    ~~~~~~~~~~~~~~~~~~~~~^
        show_inactive=show_inactive,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        format=format_output
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/app/app/cli/commands/api_key.py", line 117, in list
    raise typer.Exit(1)
click.exceptions.Exit: 1
2024-12-22 12:42:28 - app.cli - DEBUG - CLI logging initialized (quiet=False)
2024-12-22 12:42:28 - app.cli - DEBUG - Environment: development
2024-12-22 12:42:28 - app.cli - DEBUG - Log Level: DEBUG
2024-12-22 12:42:28 - app.cli - DEBUG - CLI started with quiet=False, log_level=DEBUG
2024-12-22 12:42:28 - app.cli - INFO - Starting interactive mode
2024-12-22 12:42:28 - app.cli - DEBUG - CLI logging initialized (quiet=True)
2024-12-22 12:42:28 - app.cli - DEBUG - Environment: development
2024-12-22 12:42:28 - app.cli - DEBUG - Log Level: DEBUG
2024-12-22 12:42:33 - app.cli.commands.api_key - ERROR - Failed to list API keys
Traceback (most recent call last):
  File "/app/app/cli/commands/api_key.py", line 68, in list
    role_enum = Role[role.upper()]
                     ^^^^^^^^^^
AttributeError: 'OptionInfo' object has no attribute 'upper'
2024-12-22 12:42:33 - app.cli.interactive - ERROR - Failed to list API keys
Traceback (most recent call last):
  File "/app/app/cli/commands/api_key.py", line 68, in list
    role_enum = Role[role.upper()]
                     ^^^^^^^^^^
AttributeError: 'OptionInfo' object has no attribute 'upper'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/cli/interactive.py", line 193, in list_keys_menu
    api_key_commands.list(
    ~~~~~~~~~~~~~~~~~~~~~^
        show_inactive=show_inactive,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        format=format_output
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/app/app/cli/commands/api_key.py", line 126, in list
    raise typer.Exit(1)
click.exceptions.Exit: 1
2024-12-22 12:43:37 - app.cli - DEBUG - CLI logging initialized (quiet=False)
2024-12-22 12:43:37 - app.cli - DEBUG - Environment: development
2024-12-22 12:43:37 - app.cli - DEBUG - Log Level: DEBUG
2024-12-22 12:43:37 - app.cli - DEBUG - CLI started with quiet=False, log_level=DEBUG
2024-12-22 12:43:37 - app.cli - INFO - Starting interactive mode
2024-12-22 12:43:37 - app.cli - DEBUG - CLI logging initialized (quiet=True)
2024-12-22 12:43:37 - app.cli - DEBUG - Environment: development
2024-12-22 12:43:37 - app.cli - DEBUG - Log Level: DEBUG
2024-12-22 12:44:10 - app.cli.commands.user - ERROR - Failed to list users
Traceback (most recent call last):
  File "/app/app/cli/commands/user.py", line 66, in list
    if format.lower() == "json":
       ^^^^^^^^^^^^
AttributeError: 'OptionInfo' object has no attribute 'lower'
2024-12-22 12:44:10 - app.cli.interactive - ERROR - Failed to create API key
Traceback (most recent call last):
  File "/app/app/cli/commands/user.py", line 66, in list
    if format.lower() == "json":
       ^^^^^^^^^^^^
AttributeError: 'OptionInfo' object has no attribute 'lower'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/cli/interactive.py", line 153, in create_key_menu
    user_commands.list(show_inactive=False)
    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "/app/app/cli/commands/user.py", line 104, in list
    raise typer.Exit(1)
click.exceptions.Exit: 1
2024-12-22 12:48:55 - app.cli - DEBUG - CLI logging initialized (quiet=False)
2024-12-22 12:48:55 - app.cli - DEBUG - Environment: development
2024-12-22 12:48:55 - app.cli - DEBUG - Log Level: DEBUG
2024-12-22 12:48:55 - app.cli - DEBUG - CLI started with quiet=False, log_level=DEBUG
2024-12-22 12:48:55 - app.cli - INFO - Starting interactive mode
2024-12-22 12:48:55 - app.cli - DEBUG - CLI logging initialized (quiet=True)
2024-12-22 12:48:55 - app.cli - DEBUG - Environment: development
2024-12-22 12:48:55 - app.cli - DEBUG - Log Level: DEBUG
2024-12-22 12:48:57 - app.cli.interactive - ERROR - Failed to create API key
Traceback (most recent call last):
  File "/app/app/cli/interactive.py", line 153, in create_key_menu
    with get_db_session() as db:
         ^^^^^^^^^^^^^^
NameError: name 'get_db_session' is not defined
2024-12-22 12:50:31 - app.cli - DEBUG - CLI logging initialized (quiet=False)
2024-12-22 12:50:31 - app.cli - DEBUG - Environment: development
2024-12-22 12:50:31 - app.cli - DEBUG - Log Level: DEBUG
2024-12-22 12:50:31 - app.cli - DEBUG - CLI started with quiet=False, log_level=DEBUG
2024-12-22 12:50:31 - app.cli - INFO - Starting interactive mode
2024-12-22 12:50:31 - app.cli - DEBUG - CLI logging initialized (quiet=True)
2024-12-22 12:50:31 - app.cli - DEBUG - Environment: development
2024-12-22 12:50:31 - app.cli - DEBUG - Log Level: DEBUG
2024-12-22 12:50:35 - app.cli.interactive - ERROR - Failed to create API key
Traceback (most recent call last):
  File "/app/app/cli/interactive.py", line 156, in create_key_menu
    query = select(User).where(User.status == UserStatus.ACTIVE)
                   ^^^^
NameError: name 'User' is not defined
2024-12-22 12:52:34 - app.cli - DEBUG - CLI logging initialized (quiet=False)
2024-12-22 12:52:34 - app.cli - DEBUG - Environment: development
2024-12-22 12:52:34 - app.cli - DEBUG - Log Level: DEBUG
2024-12-22 12:52:34 - app.cli - DEBUG - CLI started with quiet=False, log_level=DEBUG
2024-12-22 12:52:34 - app.cli - INFO - Starting interactive mode
2024-12-22 12:52:34 - app.cli - DEBUG - CLI logging initialized (quiet=True)
2024-12-22 12:52:34 - app.cli - DEBUG - Environment: development
2024-12-22 12:52:34 - app.cli - DEBUG - Log Level: DEBUG
2024-12-22 12:53:02 - app.cli.interactive - ERROR - Failed to create API key
Traceback (most recent call last):
  File "/app/app/cli/interactive.py", line 189, in create_key_menu
    api_key_commands.create(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        name=name,
        ^^^^^^^^^^
        role=role,
        ^^^^^^^^^^
        user_id=user_id
        ^^^^^^^^^^^^^^^
    )
    ^
TypeError: create() got an unexpected keyword argument 'user_id'
2024-12-22 12:54:21 - app.cli - DEBUG - CLI logging initialized (quiet=False)
2024-12-22 12:54:21 - app.cli - DEBUG - Environment: development
2024-12-22 12:54:21 - app.cli - DEBUG - Log Level: DEBUG
2024-12-22 12:54:21 - app.cli - DEBUG - CLI started with quiet=False, log_level=DEBUG
2024-12-22 12:54:21 - app.cli - INFO - Starting interactive mode
2024-12-22 12:54:21 - app.cli - DEBUG - CLI logging initialized (quiet=True)
2024-12-22 12:54:21 - app.cli - DEBUG - Environment: development
2024-12-22 12:54:21 - app.cli - DEBUG - Log Level: DEBUG
2024-12-22 12:54:44 - app.cli.interactive - ERROR - Failed to list users
Traceback (most recent call last):
  File "/app/app/cli/interactive.py", line 104, in list_users_menu
    user_commands.list(
    ~~~~~~~~~~~~~~~~~~^
        show_inactive=show_inactive,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        format=format_output
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: list() got an unexpected keyword argument 'format'
2024-12-22 12:57:06 - app.cli - DEBUG - CLI logging initialized (quiet=False)
2024-12-22 12:57:06 - app.cli - DEBUG - Environment: development
2024-12-22 12:57:06 - app.cli - DEBUG - Log Level: DEBUG
2024-12-22 12:57:06 - app.cli - DEBUG - CLI started with quiet=False, log_level=DEBUG
2024-12-22 12:57:06 - app.cli - INFO - Starting interactive mode
2024-12-22 12:57:06 - app.cli - DEBUG - CLI logging initialized (quiet=True)
2024-12-22 12:57:06 - app.cli - DEBUG - Environment: development
2024-12-22 12:57:06 - app.cli - DEBUG - Log Level: DEBUG
2024-12-22 12:59:42 - app.cli - DEBUG - CLI logging initialized (quiet=False)
2024-12-22 12:59:42 - app.cli - DEBUG - Environment: development
2024-12-22 12:59:42 - app.cli - DEBUG - Log Level: DEBUG
2024-12-22 12:59:42 - app.cli - DEBUG - CLI started with quiet=False, log_level=DEBUG
2024-12-22 12:59:42 - app.cli - INFO - Starting interactive mode
2024-12-22 12:59:42 - app.cli - DEBUG - CLI logging initialized (quiet=True)
2024-12-22 12:59:42 - app.cli - DEBUG - Environment: development
2024-12-22 12:59:42 - app.cli - DEBUG - Log Level: DEBUG
2024-12-22 13:01:26 - app.cli.interactive - ERROR - Interactive menu error
Traceback (most recent call last):
  File "/app/app/cli/interactive.py", line 306, in interactive_menu
    display_version_info()
    ~~~~~~~~~~~~~~~~~~~~^^
  File "/app/app/cli/manage.py", line 71, in display_version_info
    user_count = db.exec(select(User)).count()
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'ScalarResult' object has no attribute 'count'
2024-12-22 13:02:22 - app.cli - DEBUG - CLI logging initialized (quiet=False)
2024-12-22 13:02:22 - app.cli - DEBUG - Environment: development
2024-12-22 13:02:22 - app.cli - DEBUG - Log Level: DEBUG
2024-12-22 13:02:22 - app.cli - DEBUG - CLI started with quiet=False, log_level=DEBUG
2024-12-22 13:02:22 - app.cli - INFO - Starting interactive mode
2024-12-22 13:02:22 - app.cli - DEBUG - CLI logging initialized (quiet=True)
2024-12-22 13:02:22 - app.cli - DEBUG - Environment: development
2024-12-22 13:02:22 - app.cli - DEBUG - Log Level: DEBUG
2024-12-22 13:02:27 - app.cli.interactive - ERROR - Interactive menu error
Traceback (most recent call last):
  File "/app/app/cli/interactive.py", line 306, in interactive_menu
    display_version_info()
    ~~~~~~~~~~~~~~~~~~~~^^
  File "/app/app/cli/manage.py", line 79, in display_version_info
    api_keys = db.exec(select(APIKey)).all()
                              ^^^^^^
NameError: name 'APIKey' is not defined
2024-12-22 13:03:16 - app.cli - DEBUG - CLI logging initialized (quiet=False)
2024-12-22 13:03:16 - app.cli - DEBUG - Environment: development
2024-12-22 13:03:16 - app.cli - DEBUG - Log Level: DEBUG
2024-12-22 13:03:16 - app.cli - DEBUG - CLI started with quiet=False, log_level=DEBUG
2024-12-22 13:03:16 - app.cli - INFO - Starting interactive mode
2024-12-22 13:03:16 - app.cli - DEBUG - CLI logging initialized (quiet=True)
2024-12-22 13:03:16 - app.cli - DEBUG - Environment: development
2024-12-22 13:03:16 - app.cli - DEBUG - Log Level: DEBUG
2024-12-22 13:03:17 - app.cli - INFO - Version information displayed: 1.0.0
2024-12-22 13:05:45 - app.cli - DEBUG - CLI logging initialized (quiet=False)
2024-12-22 13:05:45 - app.cli - DEBUG - Environment: development
2024-12-22 13:05:45 - app.cli - DEBUG - Log Level: DEBUG
2024-12-22 13:05:45 - app.cli - DEBUG - CLI started with quiet=False, log_level=DEBUG
2024-12-22 13:05:45 - app.cli - INFO - Starting interactive mode
2024-12-22 13:05:45 - app.cli - DEBUG - CLI logging initialized (quiet=True)
2024-12-22 13:05:45 - app.cli - DEBUG - Environment: development
2024-12-22 13:05:45 - app.cli - DEBUG - Log Level: DEBUG
2024-12-22 13:09:07 - app.cli - DEBUG - CLI logging initialized (quiet=False)
2024-12-22 13:09:07 - app.cli - DEBUG - Environment: development
2024-12-22 13:09:07 - app.cli - DEBUG - Log Level: DEBUG
2024-12-22 13:09:07 - app.cli - DEBUG - CLI started with quiet=False, log_level=DEBUG
2024-12-22 13:09:07 - app.cli - INFO - Starting interactive mode
2024-12-22 13:09:07 - app.cli - DEBUG - CLI logging initialized (quiet=True)
2024-12-22 13:09:07 - app.cli - DEBUG - Environment: development
2024-12-22 13:09:07 - app.cli - DEBUG - Log Level: DEBUG
2024-12-22 13:12:09 - app.cli - DEBUG - CLI logging initialized (quiet=False)
2024-12-22 13:12:09 - app.cli - DEBUG - Environment: development
2024-12-22 13:12:09 - app.cli - DEBUG - Log Level: DEBUG
2024-12-22 13:12:09 - app.cli - DEBUG - CLI started with quiet=False, log_level=DEBUG
2024-12-22 13:12:09 - app.cli - INFO - Starting interactive mode
2024-12-22 13:12:09 - app.cli - DEBUG - CLI logging initialized (quiet=True)
2024-12-22 13:12:09 - app.cli - DEBUG - Environment: development
2024-12-22 13:12:09 - app.cli - DEBUG - Log Level: DEBUG
2024-12-22 13:17:15 - app.cli - INFO - Version information displayed: 1.0.0
2024-12-22 13:19:35 - app.cli - DEBUG - CLI logging initialized (quiet=False)
2024-12-22 13:19:35 - app.cli - DEBUG - Environment: development
2024-12-22 13:19:35 - app.cli - DEBUG - Log Level: DEBUG
2024-12-22 13:19:35 - app.cli - DEBUG - CLI started with quiet=False, log_level=DEBUG
2024-12-22 13:19:35 - app.cli - INFO - Starting interactive mode
2024-12-22 13:19:35 - app.cli - DEBUG - CLI logging initialized (quiet=True)
2024-12-22 13:19:35 - app.cli - DEBUG - Environment: development
2024-12-22 13:19:35 - app.cli - DEBUG - Log Level: DEBUG
2024-12-22 13:21:01 - app.cli - DEBUG - CLI logging initialized (quiet=False)
2024-12-22 13:21:01 - app.cli - DEBUG - Environment: development
2024-12-22 13:21:01 - app.cli - DEBUG - Log Level: DEBUG
2024-12-22 13:21:01 - app.cli - DEBUG - CLI started with quiet=False, log_level=DEBUG
2024-12-22 13:21:01 - app.cli - INFO - Starting interactive mode
2024-12-22 13:21:01 - app.cli - DEBUG - CLI logging initialized (quiet=True)
2024-12-22 13:21:01 - app.cli - DEBUG - Environment: development
2024-12-22 13:21:01 - app.cli - DEBUG - Log Level: DEBUG
